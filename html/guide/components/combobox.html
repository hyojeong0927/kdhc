<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combobox</title>
    <!-- css -->
    <link rel="stylesheet" href="../../../assets/css/index.css">
    <style>
        .multi-selectbox {
            width: 300px;
            background-color: #BCC2C1;
        }
 
        .selectbox {
            position: relative;
        }
 
        .selectbox select {
            width: 100%;
            font-weight: bold;
        }
 
        .overSelect {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
        }
 
        #checkBoxes {
            display: none;
            border: 1px #8DF5E4 solid;
        }
 
        #checkBoxes label {
            display: block;
        }
 
        #checkBoxes label:hover {
            background-color: #4F615E;
            color: white;
            /* Added text color for better visibility */
        }
    </style>
</head>
<body>
    <article class="guide-contents">
        <div class="title">
			<h3>Combobox</h3>
		</div>
        <div class="multi-selectbox">
    <div class="selectbox" onclick="showCheckboxes()">
        <select id="dropdown">
            <option id="result">Select options</option>
        </select>
        <div class="overSelect"></div>
    </div>

    <div id="checkBoxes">
        <label for="selectAll">
            <input type="checkbox" id="selectAll" onclick="toggleAllCheckboxes()" />
            Select All
        </label>
        <label for="first">
            <input type="checkbox" name="first" id="first" value="checkBox1" onclick="updateDropdown()" />
            checkBox1
        </label>
        <label for="second">
            <input type="checkbox" name="second" id="second" value="checkBox2" onclick="updateDropdown()" />
            checkBox2
        </label>
        <label for="third">
            <input type="checkbox" name="third" id="third" value="checkBox3" onclick="updateDropdown()" />
            checkBox3
        </label>
        <label for="fourth">
            <input type="checkbox" name="fourth" id="fourth" value="checkBox4" onclick="updateDropdown()" />
            checkBox4
        </label>
    </div>
</div>
    </article>
    <script>
    let show = true;

    function showCheckboxes() {
        let checkboxes = document.getElementById("checkBoxes");
        checkboxes.style.display = show ? "block" : "none";
        show = !show;
    }

    function updateDropdown() {
        let dropdown = document.getElementById("dropdown");
        let selectedOptions = document.querySelectorAll("#checkBoxes input[type='checkbox']:checked:not(#selectAll)");
        
        // 기존 옵션을 초기화
        dropdown.innerHTML = "";
        
        let selectedValues = [];
        selectedOptions.forEach(option => {
            selectedValues.push(option.value);
        });
        
        let newOption = document.createElement("option");
        newOption.text = selectedValues.length > 0 ? selectedValues.join(", ") : "Select options";
        newOption.value = selectedValues.join(", ");
        dropdown.appendChild(newOption);
    }

    function toggleAllCheckboxes() {
        let selectAll = document.getElementById("selectAll");
        let checkboxes = document.querySelectorAll("#checkBoxes input[type='checkbox']:not(#selectAll)");
        checkboxes.forEach(checkbox => {
            checkbox.checked = selectAll.checked;
        });
        updateDropdown();
    }
</script>
</body>
</html>